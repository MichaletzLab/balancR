% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/balanced_scaling.R
\name{balanced_scaling}
\alias{balanced_scaling}
\title{Data balancing across log- or linear-scaled bins and fitting via SMA regression}
\usage{
balanced_scaling(
  data,
  var_x,
  var_y,
  min_per_bin = 100,
  n_boot = 100,
  base = 10,
  seed = 1,
  model_type = c("power", "exp", "linear")
)
}
\arguments{
\item{data}{A data frame or tibble.}

\item{var_x, var_y}{Unquoted column names for the predictor and response.}

\item{min_per_bin}{Minimum number of observations per bin. Default \code{100}.}

\item{n_boot}{Number of bootstrap iterations.  Default \code{100}.}

\item{base}{Logarithmic base when \code{scale = "log"}. Default \code{10}.}

\item{seed}{Base seed for reproducibility; iteration \emph{i} uses
\code{seed + i}.  Set \code{NULL} for no seeding.}

\item{model_type}{\code{"power"} (default), \code{"exp"}, or \code{"linear"}.}
}
\value{
A \strong{list} with:
\describe{
\item{\code{stats}}{Regression statistics, including r², p-value, slope, intercept (i.e., elevation).}
\item{\code{first_boot}}{The first bootstrap-balanced dataset generated via the function. Useful for plotting or statistical comparisons with original, imbalanced data.}
\item{\code{bins}}{The exact output from \code{\link[=create_bins]{create_bins()}} —
a list with \code{data} (binned input rows) and
\code{summary} (one‑row‑per‑bin metadata including
\code{bin_width}, \code{bin_class}, \code{bootstrap_count}, etc.).}
}
}
\description{
\code{balanced_scaling()} partitions a data set into equal‑width bins on a
log or linear axis, upsamples each bin so they contain the same number
of observations, and then fits a \strong{standardised major axis (SMA)}
model to every balanced bootstrap replicate.
}
\details{
Three model types are supported:
\describe{
\item{\code{"power"}}{Power‑law model \emph{y = a xᵇ} (log10–log10).}
\item{\code{"exp"}}{Exponential model \emph{y = a exp(b x)} (log–linear).}
\item{\code{"linear"}}{Ordinary linear model \emph{y = a + b x}.}
}
}
\examples{
if (requireNamespace("smatr", quietly = TRUE)) {
  data(xylem_scaling_simulation_dataset)
  res <- balanced_scaling(
    data        = xylem_scaling_simulation_dataset,
    var_x       = L,
    var_y       = DAVG,
    min_per_bin = 100,
    n_boot      = 10,
    seed        = 1,
    model_type  = "power"
  )
  head(res$stats)
}

}
\references{
Simovic, M., & Michaletz, S.T. (2025). \emph{Harnessing the Full Power of Data
to Characterise Biological Scaling Relationships.} \strong{Global Ecology and
Biogeography}, 34(2). \url{https://doi.org/10.1111/geb.70019}
Warton, D.I., Duursma, R.A., Falster, D.S., & Taskinen, S. (2012).
\emph{smatr 3 – an R package for estimation and inference about allometric
lines.} \strong{Methods in Ecology and Evolution}, 3(2), 257–259.
\url{https://doi.org/10.1111/j.2041-210X.2011.00153.x}
}
\seealso{
\code{\link[=create_bins]{create_bins()}}, \code{\link[smatr:sma]{smatr::sma()}}
}
\author{
Simovic, M. \href{mailto:milos.simovic@botany.ubc.ca}{milos.simovic@botany.ubc.ca};
Michaletz, S.T. \href{mailto:sean.michaletz@ubc.ca}{sean.michaletz@ubc.ca}
}
